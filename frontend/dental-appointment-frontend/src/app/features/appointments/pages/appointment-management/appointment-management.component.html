<mat-toolbar>
  <span class="spacer"></span>
  <span>Appointments</span>
  <span class="spacer"></span>
  <button
    mat-raised-button
    color="primary"
    class="refresh-btn"
    (click)="loadAppointments()"
  >
    Refresh
  </button>
</mat-toolbar>

<mat-table [dataSource]="appointments" class="mat-elevation-z8">
  <ng-container matColumnDef="id">
    <mat-header-cell *matHeaderCellDef> ID </mat-header-cell>
    <mat-cell *matCellDef="let appointment"> {{ appointment.id }} </mat-cell>
  </ng-container>

  <ng-container matColumnDef="appointmentDateTime">
    <mat-header-cell *matHeaderCellDef> Date & Time </mat-header-cell>
    <mat-cell *matCellDef="let appointment">
      {{ appointment.appointmentDateTime | date : "short" }}
    </mat-cell>
  </ng-container>

  <ng-container matColumnDef="patientName">
    <mat-header-cell *matHeaderCellDef> Patient Name </mat-header-cell>
    <mat-cell *matCellDef="let appointment">
      {{ appointment.patientName }}
    </mat-cell>
  </ng-container>

  <ng-container matColumnDef="patientPhoneNumber">
    <mat-header-cell *matHeaderCellDef> Phone Number </mat-header-cell>
    <mat-cell *matCellDef="let appointment">
      {{ appointment.patientPhoneNumber }}
    </mat-cell>
  </ng-container>

  <ng-container matColumnDef="treatmentType">
    <mat-header-cell *matHeaderCellDef> Treatment Type </mat-header-cell>
    <mat-cell *matCellDef="let appointment">
      {{ getTreatmentTypeName(appointment.treatmentType) }}
    </mat-cell>
  </ng-container>

  <ng-container matColumnDef="status">
    <mat-header-cell *matHeaderCellDef> Status </mat-header-cell>
    <mat-cell *matCellDef="let appointment">
      <span *ngIf="appointment.isConfirmed">Confirmed</span>
      <span *ngIf="appointment.isRejected">Rejected</span>
    </mat-cell>
  </ng-container>

  <ng-container matColumnDef="actions">
    <mat-header-cell *matHeaderCellDef> Actions </mat-header-cell>
    <mat-cell *matCellDef="let appointment">
      <a
        mat-button
        color="primary"
        [routerLink]="['/appointments', appointment.id]"
        >View</a
      >
      <button
        mat-button
        color="warn"
        (click)="deleteAppointment(appointment.appointmentDateTime)"
      >
        Delete
      </button>
    </mat-cell>
  </ng-container>

  <mat-header-row *matHeaderRowDef="displayedColumns"></mat-header-row>
  <mat-row *matRowDef="let row; columns: displayedColumns"></mat-row>
</mat-table>
